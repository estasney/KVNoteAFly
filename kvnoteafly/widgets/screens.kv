#:import NoteCategories widgets.categories
#:import CategoryScreenScrollWrapper widgets.categories
#:import ScrollingListView widgets.scroller
#:import Note widgets.note
#:import Buttons widgets.buttons.buttons

<NoteAppScreenManager>:
    id: screen_manager
    NoteCategoryChooserScreen:
        id: chooser_screen
        name: 'chooser_screen'
    NoteListViewScreen:
        id: list_view_screen
        name: 'list_view_screen'
    NoteEditScreen:
        id: note_edit_screen
        name: 'note_edit_screen'


<NoteListViewScreen>:
    id: manager_screen
    meta_notes: app.note_category_meta
    ScrollingListView:
        id: scroller


<NoteCategoryChooserScreen>:
    id: category_screen
    chooser: chooser
    categories: app.note_categories
    canvas.before:
        Color:
            rgba: app.colors['Dark']
        Rectangle:
            size: self.size
            pos: self.pos
    CategoryScreenScrollWrapper:
        screen: category_screen
        categories: category_screen.categories
        id: chooser

<NoteCategoryScreen>:
    current_note: current_note
    Note:
        id: current_note

<NoteEditScreen>:
    id: edit_screen
    editor: editor
    canvas:
        Color:
            rgba: app.colors['Dark']
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: 'vertical'
        CodeInput:
            id: editor
            size_hint_x: 1
            size_hint_y: .9
            lexer: edit_screen.lexer
            style_name: edit_screen.style_name
            font_family: "RobotoMono"
            font_size: app.base_font_size

        BoxLayout:
            size_hint_x: 1
            size_hint_y: 0.1
            orientation: 'horizontal'
            SaveButton:
                on_release: edit_screen.handle_save()
            CancelButton:
                on_release: edit_screen.handle_cancel()
